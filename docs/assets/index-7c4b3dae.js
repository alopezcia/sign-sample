(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function s(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(t){if(t.ep)return;t.ep=!0;const n=s(t);fetch(t.href,n)}})();class c{constructor(){this.width_line=1,this.color="#000000",this.sign=!1,this.begin_sign=!1,this.canvas=document.getElementById("canvas");const e=this.canvas.getContext("2d");e.lineJoin="round",e.lineCap="round",this.span=document.getElementById("coords"),this.mouseDownEvents(),this.mouseUpEvents(),this.mouseMoveEvents(),this.modalEvents(),this.resetCanvas(),this.createSignature(this.canvas),this.clearCanvas()}updateMousePosition(e,s,o){const t=e.getBoundingClientRect(),n=e.width/t.width,r=e.height/t.height;this.cursorX=(s-t.left)*n,this.cursorY=(o-t.top)*r}createSignature(e){if(this.span.innerText=`   x: ${this.cursorX} y; ${this.cursorY}`,e){const s=e.getContext("2d");s&&(this.begin_sign?(s.lineTo(this.cursorX,this.cursorY),s.strokeStyle=this.color,s.lineWidth=this.width_line,s.stroke()):(s.beginPath(),s.moveTo(this.cursorX,this.cursorY),this.begin_sign=!0))}}mouseDownEvents(){this.canvas.addEventListener("mousedown",({target:e,pageX:s,pageY:o})=>{this.sign=!0,this.updateMousePosition(e,s,o)})}mouseUpEvents(){this.canvas.addEventListener("mouseup",e=>{this.sign=!1,this.begin_sign=!1})}mouseMoveEvents(){this.canvas.addEventListener("mousemove",({target:e,pageX:s,pageY:o})=>{this.sign&&(this.updateMousePosition(e,s,o),this.createSignature(e))})}resetCanvas(){document.getElementById("reset").addEventListener("click",()=>{this.clearCanvas()})}clearCanvas(){const e=this.canvas.getContext("2d");e&&e.clearRect(0,0,this.canvas.width,this.canvas.height)}modalEvents(){$("#bookingmodal").on("hidden.bs.modal",function(){const e=document.getElementById("canvas");let s=document.getElementById("firmadoPadre");this.progenitor==="Madre"&&(s=document.getElementById("firmadoMadre"));const o=e.toDataURL();s.src=o}),$("#bookingmodal").on("show.bs.modal",function(e){const s=e.relatedTarget,o=document.getElementById("canvas");let t=document.getElementById("firmadoPadre");this.progenitor=s.getAttribute("data-bs-p"),this.progenitor==="Madre"&&(t=document.getElementById("firmadoMadre")),t.src&&o.getContext("2d").drawImagen(t,0,0)})}}const a=i=>{console.log(i);const s=document.querySelectorAll(".needs-validation")[0];s.checkValidity()||(i.preventDefault(),i.stopPropagation()),s.classList.add("was-validated")};new c;const d=document.getElementById("main-form");d.addEventListener("submit",a);
